<div [dragula]="'EXP'">
    <div
        *ngFor="let fileIdAndDepth of fileIdsAndDepth; index as i; trackBy: trackByFn"
        [attr.data-file-id]="filesById[fileIdAndDepth[0]].id"
    >
        <div
            *ngIf="filesById[fileIdAndDepth[0]] as file"
            class="file-row"
            [ngClass]="fileIsOddById[file.id] ? 'odd' : 'even'"
            [class.dragging]="fileIdBeingDragged"
            [class.being-dragged]="fileIdBeingDragged === file.id"
            [class.selected]="selectedFileIds.has(file.id)"
            [class.hidden]="visibleFileIds && !visibleFileIds.has(file.id)"
            [style.padding-left]="getPaddingLeft(fileIdAndDepth[1])"
            (click)="selectFile(file)"
        >
            <div class="dragula-container">
                <ng-container *ngIf="file.childIds">
                    <i
                        class="material-icons arrow clickable"
                        (click)="toggleClosedFile(file, $event)"
                        [class.closed]="closedFileIds[file.id]"
                    >
                        keyboard_arrow_right
                    </i>
                    <i class="material-icons folder">
                        folder
                    </i>
                </ng-container>
                <ng-container *ngIf="!file.childIds">
                    <div class="space-maker">
                    </div>
                    <i class="material-icons text">subject</i>
                </ng-container>
                <div class="file-label" *ngIf="fuzzItemsByFileId[file.id] as fuzzItem">
                    <dwu-text-decorator
                        [ignoreUpdates]="visibleFileIds && !visibleFileIds.has(file.id)"
                        [text]="fuzzItemsByFileId[file.id].subject"
                        [matchRanges]="fuzzItemsByFileId[file.id].matchRanges"
                    ></dwu-text-decorator>
                </div>
                <div class="file-label" *ngIf="!fuzzItemsByFileId[file.id]">
                    {{ file.label || file.id }}
                </div>
            </div>
        </div>
    </div>
</div>
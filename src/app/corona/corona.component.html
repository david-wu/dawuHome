<div class="page-container">
    <div class="left-side">
        <dwu-search-input
            [searchText]="filterStr"
            (searchTextChange)="onFilterStringChange($event)"
            [placeholder]="'County, State, or Country'"
        ></dwu-search-input>
        <div class="view-tabs">
            <div
                class="view-tab"
                [class.active]="selectedTab === Tab.ALL"
                (click)="setSelectedTab(Tab.ALL)"
            >
                All
            </div>
            <div
                class="view-tab"
                [class.active]="selectedTab === Tab.SAVED"
                (click)="setSelectedTab(Tab.SAVED)"
            >
                <div class="material-icons star active">
                    grade
                </div>
                <div>Saved</div>
            </div>
            <div
                class="view-tab"
                [class.active]="selectedTab === Tab.COMPARE"
                (click)="setSelectedTab(Tab.COMPARE)"
            >
                <div>Compare</div>
            </div>
        </div>
        <dwu-file-explorer
            [rootFileId]="fileGroup.rootFileId"
            [filesById]="fileGroup.filesById"
            (filesByIdChange)="fileGroup.filesById = $event"
            [fuzzFilterString]="filterStr"
            [closedFileIds]="fileGroup.closedFileIds"
            (closedFileIdsChange)="fileGroup.setClosedFileIds($event)"
            [selectedFileIds]="fileGroup.selectedFileIds"
            (selectedFileIdsChange)="fileGroup.setSelectedFileIds($event)"
            [rowIconTemplate]="rowIconTemplate"
            [perfMode]="true"
            [multiFileSelect]="selectedTab === Tab.COMPARE"
        ></dwu-file-explorer>
    </div>
    <div class="right-side">
        <ng-container  *ngIf="getSelectedFileId() as selectedFileId" [ngSwitch]="selectedFileId">
            <dwu-corona-file-viewer
                *ngSwitchDefault
                [location]="locationsByFileId[selectedFileId]"
                [fileName]="fileGroup.filesById[selectedFileId].label"
                [(disabledBarKeys)]="disabledBarKeys"
                [(disabledNormalKeys)]="disabledNormalKeys"
                [(isViewingNormalized)]="isViewingNormalized"
                [(isViewingLineChart)]="isViewingLineChart"
            ></dwu-corona-file-viewer>
        </ng-container>
    </div>
    <ng-template #rowIconTemplate let-file="file">
        <div
            *ngIf="lockdownDataByLocation[locationsByFileId[file.id]]"
            class="material-icons row-icon lock"
        >
            lock
        </div>

        <div
            *ngIf="locationsByFileId[file.id]"
            class="material-icons star clickable row-icon"
            [class.active]="favoriteFileIds.has(file.id)"
            (click)="toggleFavoriteFile(file, $event)"
        >
            grade
        </div>
    </ng-template>
</div>
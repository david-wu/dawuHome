(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+ghK":function(e,t,n){"use strict";var a=n("SkNx");n.d(t,"a",(function(){return a.a})),n("ZrwU"),n("wGrp");var r=n("ySLx");n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.d})),n.d(t,"d",(function(){return r.e})),n("34je")},"34je":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={imageStreamsListVisible:!1,imageStreamsList:[],selectedImageStreamId:void 0,imagesByStreamId:{},imageStreamViewTab:void 0,isGeneratingTokenByImageStream:{},imageStreamTokensByImageStream:{}}},"3s01":function(e,t,n){"use strict";n.r(t);var a=n("CcnG"),r=function(){return function(){}}(),o=n("Vxrp"),i=n("pMnS"),c=n("ZYCi"),s=n("6+7j"),l=n("sjqh"),u=n("MiS9"),d=n("vRBK"),g=n("Ip0R"),m=n("yGQT"),b=n("YZbJ"),O=n("+ghK"),p=function(){function e(e,t,n){this.store=e,this.router=t,this.activatedRoute=n,this.filterStr="",this.leftSideExpanded=!1,this.user$=this.store.pipe(Object(m.B)(b.d)),this.imageStreamsList$=this.store.pipe(Object(m.B)(O.b)),this.selectedImageStreamId$=this.store.pipe(Object(m.B)(O.d))}return e.prototype.ngOnInit=function(){var e=this;this.store.dispatch(O.a.setImageStreamsListVisible({payload:!0})),this.loadInUrlState(this.router.url),this.sub=this.router.events.subscribe((function(t){t instanceof c.d&&e.loadInUrlState(t.url)}))},e.prototype.ngOnDestroy=function(){this.store.dispatch(O.a.setImageStreamsListVisible({payload:!1}))},e.prototype.onCreateSource=function(){this.store.dispatch(O.a.createImageStream())},e.prototype.onSelectedImageStreamIdChange=function(e){var t=this.router.createUrlTree([e],{relativeTo:this.activatedRoute});this.store.dispatch(O.a.navigateToImageStreamView({payload:t.toString()}))},e.prototype.loadInUrlState=function(e){var t=e.split("/"),n=t[4];this.store.dispatch(O.a.setSelectedImageStreamId({payload:"intro"===t[3]?void 0:t[3]})),this.store.dispatch(O.a.setImageStreamViewTab({payload:n}))},e}(),f=a.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:100%;width:100%}@media screen and (max-width:750px){[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{box-shadow:2px 2px 4px 0 #9d9b99;flex:0 0 auto;height:13.25rem;width:100%;max-width:none;transition:height 50ms}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side.expanded[_ngcontent-%COMP%]{height:75%}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{background-color:#3f4038;color:#fcfcf9;position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:3.5rem;height:1rem;border:1px solid #8a9a5b;border-radius:5px 5px 0 0;text-align:center;display:flex;justify-content:center;cursor:pointer}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4b5320;color:#fcfcf9}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon.flipped[_ngcontent-%COMP%]{transform:rotate(180deg)}}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]{flex-direction:column}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{box-shadow:2px 2px 4px 0 #9d9b99;flex:0 0 auto;height:13.25rem;width:100%;max-width:none;transition:height 50ms}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side.expanded[_ngcontent-%COMP%]{height:75%}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{background-color:#3f4038;color:#fcfcf9;position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:3.5rem;height:1rem;border:1px solid #8a9a5b;border-radius:5px 5px 0 0;text-align:center;display:flex;justify-content:center;cursor:pointer}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4b5320;color:#fcfcf9}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon[_ngcontent-%COMP%]{font-size:16px}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon.flipped[_ngcontent-%COMP%]{transform:rotate(180deg)}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{position:relative;flex:1 1 0;overflow:hidden;max-width:27.5%;min-width:20rem}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:1 1 0;overflow:auto;position:relative}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]{background-color:#ddd9cf;display:flex;flex-direction:column}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .explorer-title[_ngcontent-%COMP%]{text-align:center;font-size:1.25rem;padding-top:.5rem}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .wide-button[_ngcontent-%COMP%]{flex:1 1 0;background-color:#eae6da;min-width:2rem;padding:.25rem .5rem;font-size:1rem;cursor:pointer;text-align:center;outline:0;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .wide-button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#bac39f}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .wide-button.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .wide-button[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]{flex:0 0 auto;background-color:#eae6da;min-width:2rem;padding:.25rem .5rem;font-size:1rem;cursor:pointer;text-align:center;outline:0;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;height:26px;display:flex;align-items:center}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#bac39f}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .icon-button.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .icon-button[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .icon-button[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1rem}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .file-explorer[_ngcontent-%COMP%]{flex:1 1 0}"]],data:{}});function _(e){return a.Nb(0,[(e()(),a.sb(0,0,null,null,22,"div",[["class","page-container"]],null,null,null,null,null)),(e()(),a.sb(1,0,null,null,18,"div",[["class","left-side"]],[[2,"expanded",null]],null,null,null,null)),(e()(),a.sb(2,0,null,null,11,"div",[["class","control-buttons"]],null,null,null,null,null)),(e()(),a.sb(3,0,null,null,1,"div",[["class","wide-button"]],null,[[null,"click"]],(function(e,t,n){var a=!0;return"click"===t&&(a=!1!==e.component.onCreateSource()&&a),a}),null,null)),(e()(),a.Lb(-1,null,[" + New Stream "])),(e()(),a.sb(5,0,null,null,8,"div",[["class","icon-button"]],null,[[null,"click"]],(function(e,t,n){var r=!0;return"click"===t&&(r=!1!==a.Db(e,6).onClick()&&r),r}),null,null)),a.rb(6,16384,[[1,4]],0,c.m,[c.l,c.a,[8,null],a.D,a.k],{routerLink:[0,"routerLink"]},null),a.Eb(7,1),a.rb(8,1720320,null,2,c.n,[c.l,a.k,a.D,[2,c.m],[2,c.o]],{routerLinkActive:[0,"routerLinkActive"]},null),a.Jb(603979776,1,{links:1}),a.Jb(603979776,2,{linksWithHrefs:1}),a.Eb(11,1),(e()(),a.sb(12,0,null,null,1,"span",[["class","material-icons"]],null,null,null,null,null)),(e()(),a.Lb(-1,null,["help"])),(e()(),a.sb(14,0,null,null,1,"dwu-search-input",[],null,[[null,"searchTextChange"]],(function(e,t,n){var a=!0;return"searchTextChange"===t&&(a=!1!==(e.component.filterStr=n)&&a),a}),s.b,s.a)),a.rb(15,49152,null,0,l.a,[],{searchText:[0,"searchText"],placeholder:[1,"placeholder"]},{searchTextChange:"searchTextChange"}),(e()(),a.sb(16,0,null,null,3,"dwu-resource-selector",[["class","file-explorer"]],null,[[null,"selectedResourceIdChange"]],(function(e,t,n){var a=!0;return"selectedResourceIdChange"===t&&(a=!1!==e.component.onSelectedImageStreamIdChange(n)&&a),a}),u.b,u.a)),a.rb(17,573440,null,0,d.a,[],{resources:[0,"resources"],filterStr:[1,"filterStr"],selectedResourceId:[2,"selectedResourceId"]},{selectedResourceIdChange:"selectedResourceIdChange"}),a.Fb(131072,g.b,[a.h]),a.Fb(131072,g.b,[a.h]),(e()(),a.sb(20,0,null,null,2,"div",[["class","right-side"]],null,null,null,null,null)),(e()(),a.sb(21,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),a.rb(22,212992,null,0,c.q,[c.b,a.O,a.j,[8,null],a.h],null,null)],(function(e,t){var n=t.component,r=e(t,7,0,"intro");e(t,6,0,r);var o=e(t,11,0,"active");e(t,8,0,o),e(t,15,0,n.filterStr,"search.."),e(t,17,0,a.Mb(t,17,0,a.Db(t,18).transform(n.imageStreamsList$)),n.filterStr,a.Mb(t,17,2,a.Db(t,19).transform(n.selectedImageStreamId$))),e(t,22,0)}),(function(e,t){e(t,1,0,t.component.leftSideExpanded)}))}function h(e){return a.Nb(0,[(e()(),a.Lb(-1,null,[" login\n"]))],null,null)}function S(e){return a.Nb(0,[(e()(),a.hb(16777216,null,null,2,null,_)),a.rb(1,16384,null,0,g.m,[a.O,a.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),a.Fb(131072,g.b,[a.h]),(e()(),a.hb(0,[["loginTemplate",2]],null,0,null,h))],(function(e,t){var n=t.component;e(t,1,0,a.Mb(t,1,0,a.Db(t,2).transform(n.user$)),a.Db(t,3))}),null)}function I(e){return a.Nb(0,[(e()(),a.sb(0,0,null,null,1,"dwu-image-streams",[],null,null,null,S,f)),a.rb(1,245760,null,0,p,[m.n,c.l,c.a],null,null)],(function(e,t){e(t,1,0)}),null)}var C=a.ob("dwu-image-streams",p,I,{},{},[]),M=n("PTyj"),j=n("gIcY"),P=n("0gVX"),E=n("trGy"),T=n("xpxz"),A=n("mrSG"),v=function(){function e(e,t,n,a){this.firestore=e,this.storage=t,this.imageProcessing=n,this.exifService=a}return e.prototype.generateImageStreamToken=function(e){return A.__awaiter(this,void 0,void 0,(function(){return A.__generator(this,(function(t){switch(t.label){case 0:return[4,window.firebase.functions().httpsCallable("generateImageStreamTokenTask")({imageStreamId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.deleteFile=function(e){return A.__awaiter(this,void 0,void 0,(function(){return A.__generator(this,(function(t){switch(t.label){case 0:return[4,this.storage.deleteFile(e)];case 1:return t.sent(),[4,this.firestore.unregisterFile(e)];case 2:return[2,t.sent()]}}))}))},e.prototype.uploadImageStreamFile=function(e,t,n){return A.__awaiter(this,void 0,void 0,(function(){var a,r,o,i,c,s,l;return A.__generator(this,(function(u){switch(u.label){case 0:return[4,this.exifService.getExifData(e)];case 1:return a=u.sent(),r=this.exifService.getLocationData(a),o={userId:t.uid,fileName:e.name,isUploaded:!1,sourceId:n,locationData:A.__assign({},r)},[4,this.firestore.insertUploadDoc(o)];case 2:return i=u.sent(),c=A.__assign({},o,{id:i.id}),[4,this.imageProcessing.processImageFile(e,a)];case 3:return s=u.sent(),[4,this.storage.uploadFile(s,c.id)];case 4:return[4,u.sent().ref.getDownloadURL()];case 5:return l=u.sent(),[4,this.firestore.registerFileUploaded(c.id,{downloadUrl:l})];case 6:return[2,u.sent()]}}))}))},e.prototype.updateImageStream=function(e,t){return this.firestore.db.collection("imageStreams").doc(e).update(t)},e}(),y=n("GrFz"),R=n("cxyc"),x=n("YDhq"),B=n("ZrwU"),w=n("7bNT"),G=n("5a0h"),F=n("ntSj"),k=n("O0RR"),L=n("FE7n"),U=n("Rkte"),D=n("mRcA"),Y=n("R7F0"),N=n("a6Df"),$=n("s/lM"),z=n("Fzqc"),V=n("dWZg"),q=n("qAlS"),K=n("FdjG"),J=n("mzR0"),Q=function(){return n.e(25).then(n.bind(null,"A/RT")).then((function(e){return e.ImageStreamsIntroModuleNgFactory}))},Z=function(){return n.e(32).then(n.bind(null,"TlF7")).then((function(e){return e.ImageStreamViewModuleNgFactory}))},W=function(){return function(){}}(),X=n("3A+F"),H=n("jG/M"),ee=n("wGrp"),te=n("W61y");n.d(t,"ImageStreamsModuleNgFactory",(function(){return ne}));var ne=a.pb(r,[],(function(e){return a.Ab([a.Bb(512,a.j,a.ab,[[8,[o.a,i.a,C,M.b]],[3,a.j],a.w]),a.Bb(4608,g.o,g.n,[a.t,[2,g.A]]),a.Bb(4608,j.r,j.r,[]),a.Bb(135680,P.a,P.a,[a.j,a.g,a.q]),a.Bb(4608,E.a,E.a,[]),a.Bb(4608,T.a,T.a,[]),a.Bb(4608,v,v,[T.a,y.a,R.a,x.a]),a.Bb(4608,B.a,B.a,[m.n,w.a,T.a,v,c.l,G.a]),a.Bb(1073742336,g.c,g.c,[]),a.Bb(1073742336,j.q,j.q,[]),a.Bb(1073742336,j.h,j.h,[]),a.Bb(1073742336,F.a,F.a,[]),a.Bb(1073742336,k.a,k.a,[]),a.Bb(1073742336,L.a,L.a,[]),a.Bb(1073742336,U.a,U.a,[]),a.Bb(1073742336,D.a,D.a,[]),a.Bb(1073742336,Y.a,Y.a,[]),a.Bb(1073742336,N.a,N.a,[]),a.Bb(1073742336,$.b,$.b,[]),a.Bb(1073742336,z.a,z.a,[]),a.Bb(1073742336,V.b,V.b,[]),a.Bb(1073742336,q.h,q.h,[]),a.Bb(1073742336,K.a,K.a,[]),a.Bb(1073742336,J.a,J.a,[]),a.Bb(1073742336,c.p,c.p,[[2,c.u],[2,c.l]]),a.Bb(1073742336,W,W,[]),a.Bb(1073742336,X.a,X.a,[]),a.Bb(1073742336,H.a,H.a,[]),a.Bb(1024,m.O,(function(){return[{}]}),[]),a.Bb(1024,m.j,(function(){return[{key:"imageStreams",reducerFactory:m.s,metaReducers:[],initialState:void 0}]}),[]),a.Bb(1024,m.P,m.W,[a.q,m.O,m.j]),a.Bb(1024,m.N,(function(){return[ee.a]}),[]),a.Bb(1024,m.Q,(function(e){return[e]}),[m.N]),a.Bb(1024,m.b,(function(e,t,n){return[m.X(e,t,n)]}),[a.q,m.N,m.Q]),a.Bb(1024,m.U,(function(e){return[m.H(e)]}),[m.T]),a.Bb(1073873408,m.o,m.o,[m.P,m.b,m.g,m.p,[2,m.U]]),a.Bb(1024,w.p,(function(){return[[B.a]]}),[]),a.Bb(1024,w.g,(function(){return[[]]}),[]),a.Bb(1024,w.q,(function(e,t,n){return[w.k(e,t,n)]}),[a.q,w.p,w.g]),a.Bb(1073742336,w.d,w.d,[w.e,w.q,[2,m.p],[2,m.o]]),a.Bb(1073742336,r,r,[]),a.Bb(1024,c.j,(function(){return[[{path:"",component:p,children:[{path:"intro",loadChildren:Q},{path:":imageStreamId",loadChildren:Z},{path:"",pathMatch:"full",redirectTo:"intro"}]}],[{path:"auth",component:te.a},{path:"auth-success",component:te.a}]]}),[])])}))},MiS9:function(e,t,n){"use strict";var a=n("CcnG"),r=n("nPNc"),o=n("s/lM"),i=n("+J3Q");n("vRBK"),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var c=a.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   dwu-file-explorer[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}"]],data:{}});function s(e){return a.Nb(0,[(e()(),a.sb(0,0,null,null,2,"dwu-file-explorer",[],null,[[null,"filesByIdChange"],[null,"closedFileIdsChange"],[null,"selectedFileIdsChange"]],(function(e,t,n){var a=!0,r=e.component;return"filesByIdChange"===t&&(a=!1!==(r.fileGroup.filesById=n)&&a),"closedFileIdsChange"===t&&(a=!1!==r.fileGroup.setClosedFileIds(n)&&a),"selectedFileIdsChange"===t&&(a=!1!==r.onSelectedFileIdsChange(n)&&a),a}),r.b,r.a)),a.Ib(512,null,o.c,o.c,[[2,o.d]]),a.rb(2,4898816,null,0,i.a,[o.c,a.k],{rootFileId:[0,"rootFileId"],fuzzFilterString:[1,"fuzzFilterString"],filesById:[2,"filesById"],closedFileIds:[3,"closedFileIds"],selectedFileIds:[4,"selectedFileIds"],perfMode:[5,"perfMode"],multiFileSelect:[6,"multiFileSelect"]},{filesByIdChange:"filesByIdChange",closedFileIdsChange:"closedFileIdsChange",selectedFileIdsChange:"selectedFileIdsChange"})],(function(e,t){var n=t.component;e(t,2,0,n.fileGroup.rootFileId,n.filterStr,n.fileGroup.filesById,n.fileGroup.closedFileIds,n.selectedResourceIds,!0,n.isMultiSelect)}),null)}},SkNx:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("yGQT"),r=function(){function e(){}return e.CATEGORY="[IMAGE_STREAMS]",e.setImageStreamsListVisible=Object(a.u)(e.CATEGORY+" SET_IMAGE_STREAMS_LIST_VISIBLE",Object(a.A)()),e.setImageStreamsList=Object(a.u)(e.CATEGORY+" SET_IMAGE_STREAMS_LIST",Object(a.A)()),e.createImageStream=Object(a.u)(e.CATEGORY+" CREATE_IMAGE_STREAM"),e.createImageStreamSuccess=Object(a.u)(e.CATEGORY+" CREATE_IMAGE_STREAM_SUCCESS",Object(a.A)()),e.createImageStreamFailure=Object(a.u)(e.CATEGORY+" CREATE_IMAGE_STREAM_FAILURE",Object(a.A)()),e.setSelectedImageStreamId=Object(a.u)(e.CATEGORY+" SET_SELECTED_IMAGE_STREAM_ID",Object(a.A)()),e.loadImagesByStreamId=Object(a.u)(e.CATEGORY+" LOAD_IMAGES_BY_STREAM_ID",Object(a.A)()),e.addImagesByStreamId=Object(a.u)(e.CATEGORY+" ADD_IMAGES_BY_STREAM_ID",Object(a.A)()),e.uploadImageStreamFile=Object(a.u)(e.CATEGORY+" UPLOAD_IMAGE_STREAM_FILE",Object(a.A)()),e.uploadImageStreamFileSuccess=Object(a.u)(e.CATEGORY+" UPLOAD_IMAGE_STREAM_FILE_SUCCESS",Object(a.A)()),e.uploadImageStreamFileFailure=Object(a.u)(e.CATEGORY+" UPLOAD_IMAGE_STREAM_FILE_FAILURE",Object(a.A)()),e.deleteUpload=Object(a.u)(e.CATEGORY+" DELETE_UPLOAD",Object(a.A)()),e.deleteUploadSuccess=Object(a.u)(e.CATEGORY+" DELETE_UPLOAD_SUCCESS",Object(a.A)()),e.deleteUploadFailure=Object(a.u)(e.CATEGORY+" DELETE_UPLOAD_FAILURE",Object(a.A)()),e.setImageStreamViewTab=Object(a.u)(e.CATEGORY+" SET_IMAGE_STREAM_VIEW_TAB",Object(a.A)()),e.navigateToImageStreamView=Object(a.u)(e.CATEGORY+" NAVIGATE_TO_IMAGE_STREAM_VIEW",Object(a.A)()),e.updateImageStream=Object(a.u)(e.CATEGORY+" UPDATE_IMAGE_STREAM",Object(a.A)()),e.updateImageStreamSuccess=Object(a.u)(e.CATEGORY+" UPDATE_IMAGE_STREAM_SUCCESS",Object(a.A)()),e.updateImageStreamFailure=Object(a.u)(e.CATEGORY+" UPDATE_IMAGE_STREAM_FAILURE",Object(a.A)()),e.generateImageStreamToken=Object(a.u)(e.CATEGORY+" GENERATE_IMAGE_STREAM_TOKEN",Object(a.A)()),e.generateImageStreamTokenSuccess=Object(a.u)(e.CATEGORY+" GENERATE_IMAGE_STREAM_TOKEN_SUCCESS",Object(a.A)()),e.generateImageStreamTokenFailure=Object(a.u)(e.CATEGORY+" GENERATE_IMAGE_STREAM_TOKEN_FAILURE",Object(a.A)()),e.loadImageStreamTokens=Object(a.u)(e.CATEGORY+" LOAD_IMAGE_STREAM_TOKENS",Object(a.A)()),e.loadImageStreamTokensSuccess=Object(a.u)(e.CATEGORY+" LOAD_IMAGE_STREAM_TOKENS_SUCCESS",Object(a.A)()),e.loadImageStreamTokensFailure=Object(a.u)(e.CATEGORY+" LOAD_IMAGE_STREAM_TOKENS_FAILURE",Object(a.A)()),e}()},ZrwU:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n("mrSG"),r=n("7bNT"),o=n("yGQT"),i=n("F/XL"),c=n("0/uQ"),s=n("/PH2"),l=n("15JJ"),u=n("67Y/"),d=n("9Z1F"),g=n("SkNx"),m=n("ySLx"),b=n("YZbJ"),O=function(e,t,n,O,p,f){var _=this;this.store$=e,this.actions$=t,this.firestore=n,this.imageStreamsService=O,this.router=p,this.ppService=f,this.getImageStreams$=Object(r.h)((function(){return _.actions$.pipe(Object(r.j)(b.a.setUser,g.a.setImageStreamsListVisible),Object(s.a)(_.store$.pipe(Object(o.B)(b.d)),_.store$.pipe(Object(o.B)(m.c))),Object(l.a)((function(e){var t=a.__read(e,3),n=t[1];return t[2]&&n?_.ppService.getImageStreams$(n).pipe(Object(u.a)((function(e){return g.a.setImageStreamsList({payload:e})}))):Object(i.a)(g.a.setImageStreamsList({payload:[]}))})))})),this.createImageStream$=Object(r.h)((function(){return _.actions$.pipe(Object(r.j)(g.a.createImageStream),Object(s.a)(_.store$.pipe(Object(o.B)(b.d))),Object(l.a)((function(e){var t=a.__read(e,2)[1];return t?_.firestore.createImageStream(t).pipe(Object(u.a)((function(e){return g.a.createImageStreamSuccess({payload:"imageStream"})})),Object(d.a)((function(e){return Object(i.a)(g.a.createImageStreamFailure({payload:e}))}))):Object(i.a)(g.a.createImageStreamFailure({payload:"no user"}))})))})),this.loadImagesByStreamId$=Object(r.h)((function(){return _.actions$.pipe(Object(r.j)(g.a.loadImagesByStreamId),Object(s.a)(_.store$.pipe(Object(o.B)(b.d))),Object(l.a)((function(e){var t=a.__read(e,2),n=t[0].payload;return n&&t[1]?_.firestore.getFilesForStream$(n).pipe(Object(u.a)((function(e){var t;return g.a.addImagesByStreamId({payload:(t={},t[n]=e,t)})}))):Object(i.a)(g.a.addImagesByStreamId({payload:{}}))})))})),this.uploadImageStreamFile$=Object(r.h)((function(){return _.actions$.pipe(Object(r.j)(g.a.uploadImageStreamFile),Object(s.a)(_.store$.pipe(Object(o.B)(b.d))),Object(l.a)((function(e){var t=a.__read(e,2),n=t[0],r=t[1],o=n.selectedImageStreamId,s=n.file;return o&&r?Object(c.a)(_.imageStreamsService.uploadImageStreamFile(s,r,o)).pipe(Object(u.a)((function(e){return g.a.uploadImageStreamFileSuccess({selectedImageStreamId:o})}))):Object(i.a)(g.a.uploadImageStreamFileFailure({payload:"no user or stream"}))})))})),this.deleteUpload$=Object(r.h)((function(){return _.actions$.pipe(Object(r.j)(g.a.deleteUpload),Object(l.a)((function(e){var t=e.payload;return t?Object(c.a)(_.imageStreamsService.deleteFile(t)).pipe(Object(u.a)((function(e){return g.a.deleteUploadSuccess({payload:t})}))):Object(i.a)(g.a.deleteUploadFailure({payload:"no uploadId"}))})))})),this.navigateToImageStreamView$=Object(r.h)((function(){return _.actions$.pipe(Object(r.j)(g.a.navigateToImageStreamView),Object(s.a)(_.store$.pipe(Object(o.B)(m.a))),Object(u.a)((function(e){var t=a.__read(e,2),n=t[1];return _.router.navigate(a.__spread([t[0].payload],n?[n]:[]))})))}),{dispatch:!1}),this.updateImageStream$=Object(r.h)((function(){return _.actions$.pipe(Object(r.j)(g.a.updateImageStream),Object(l.a)((function(e){var t=e.imageStreamId,n=e.patch;return Object(c.a)(_.imageStreamsService.updateImageStream(t,n)).pipe(Object(u.a)((function(e){return g.a.updateImageStreamSuccess({imageStreamId:t,patch:n})})))})))}))}},mzR0:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){return function(){}}()},vRBK:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("CcnG"),r=n("LvDl"),o=n("5tJd"),i=function(){function e(){this.filterStr="",this.selectedResourceIdChange=new a.n,this.selectedResourceIdsChange=new a.n,this.fileGroup=o.b.createWithRoot("ROOT"),this.rootFileId="ROOT"}return e.prototype.ngOnChanges=function(e){e.resources&&this.onResourcesChanges(this.resources),e.selectedResourceId&&(this.selectedResourceIds=this.selectedResourceId?new Set([this.selectedResourceId]):new Set)},e.prototype.onResourcesChanges=function(e){var t=Object(r.map)(e,(function(e){return Object.assign(new o.a,{id:e.id,label:e.label||e.id})}));this.fileGroup.setRootChildren(t)},e.prototype.onSelectedFileIdsChange=function(e){this.isMultiSelect&&this.selectedResourceIdsChange.emit(e);var t=Array.from(e||[])[0];this.selectedResourceIdChange.emit(t)},e}()},wGrp:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("mrSG"),r=n("yGQT"),o=n("SkNx"),i=n("34je"),c=Object(r.w)(i.a,Object(r.z)(o.a.setImageStreamsListVisible,(function(e,t){return a.__assign({},e,{imageStreamsListVisible:t.payload})})),Object(r.z)(o.a.setImageStreamsList,(function(e,t){return a.__assign({},e,{imageStreamsList:t.payload||[]})})),Object(r.z)(o.a.createImageStreamSuccess,(function(e,t){return e})),Object(r.z)(o.a.createImageStreamFailure,(function(e,t){return e})),Object(r.z)(o.a.setSelectedImageStreamId,(function(e,t){return a.__assign({},e,{selectedImageStreamId:t.payload})})),Object(r.z)(o.a.addImagesByStreamId,(function(e,t){return a.__assign({},e,{imagesByStreamId:a.__assign({},e,t.payload)})})),Object(r.z)(o.a.setImageStreamViewTab,(function(e,t){return a.__assign({},e,{imageStreamViewTab:t.payload})})),Object(r.z)(o.a.generateImageStreamToken,(function(e,t){var n;return a.__assign({},e,{isGeneratingTokenByImageStream:a.__assign({},e.isGeneratingTokenByImageStream,(n={},n[t.payload]=!0,n))})})),Object(r.z)(o.a.generateImageStreamTokenSuccess,(function(e,t){var n;return a.__assign({},e,{isGeneratingTokenByImageStream:a.__assign({},e.isGeneratingTokenByImageStream,(n={},n[t.payload]=!1,n))})})),Object(r.z)(o.a.generateImageStreamTokenFailure,(function(e,t){var n;return a.__assign({},e,{isGeneratingTokenByImageStream:a.__assign({},e.isGeneratingTokenByImageStream,(n={},n[t.payload]=!1,n))})})),Object(r.z)(o.a.loadImageStreamTokensSuccess,(function(e,t){var n;return a.__assign({},e,{imageStreamTokensByImageStream:a.__assign({},e.imageStreamTokensByImageStream,(n={},n[t.imageStreamId]=t.imageStreamTokens,n))})})));function s(e,t){return c(e,t)}},ySLx:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n("yGQT"),r=n("LvDl"),o=Object(a.v)("imageStreams"),i=Object(a.y)(o,(function(e){return e.imageStreamsListVisible})),c=Object(a.y)(o,(function(e){return e.imageStreamsList})),s=Object(a.y)(c,(function(e){return Object(r.keyBy)(e,"id")})),l=Object(a.y)(o,(function(e){return e.selectedImageStreamId})),u=Object(a.y)(s,l,(function(e,t){return e[t]})),d=(Object(a.y)(o,(function(e){return e.imagesByStreamId})),Object(a.y)(o,(function(e){return e.imageStreamViewTab}))),g=Object(a.y)(o,(function(e){return e.isGeneratingTokenByImageStream}));Object(a.y)(l,g,(function(e,t){return t[e]})),Object(a.y)(o,(function(e){return e.imageStreamTokensByImageStream}))}}]);
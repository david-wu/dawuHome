(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"5a0h":function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t("0/uQ"),c=function(){function e(e,n,t,r){this.firestore=e,this.storage=n,this.imageProcessing=t,this.exifService=r}return e.prototype.getResourceList$=function(e,n){return this.firestore.query((function(t){return t.collection(n.path).where("userId","==",e.uid).orderBy("updatedAt","desc")}))},e.prototype.getResourceDoc$=function(e,n){return this.firestore.queryDoc((function(e){return e.doc(n.path)}))},e.prototype.patchResourceDoc=function(e,n,t){return console.log("patchResourceDoc",n.path,t),Object(r.a)(this.firestore.db.doc(n.path).update(t))},e.prototype.getImageSources$=function(e){return this.firestore.query((function(n){return n.collection("imageSources").where("userId","==",e.uid).orderBy("updatedAt","desc")}))},e.prototype.getImageStreams$=function(e){return this.firestore.query((function(n){return n.collection("imageStreams").where("userId","==",e.uid).orderBy("updatedAt","desc")}))},e}()},ISaB:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t("CcnG"),c=function(){function e(){this.str="",this.strChange=new r.n,this.placeholder="Enter Text..",this.isEditing=!1,this.editStr=""}return e.prototype.ngOnInit=function(){var e=this;this.stringInput.nativeElement.addEventListener("keydown",(function(n){n&&13===n.keyCode&&e.onSaveEdit()})),this.stringInput.nativeElement.addEventListener("blur",(function(){e.str===e.editStr&&e.onCancelEdit()}))},e.prototype.onEdit=function(){var e=this;this.editStr=this.str||"",this.isEditing=!0,setTimeout((function(){return e.stringInput.nativeElement.select()}))},e.prototype.onCancelEdit=function(){this.isEditing=!1},e.prototype.onSaveEdit=function(){this.str!==this.editStr&&(this.str=this.editStr,this.strChange.emit(this.editStr)),this.isEditing=!1},e.prototype.onStrChange=function(e){this.editStr=e},e.prototype.preventBlur=function(e){e.preventDefault()},e}()},J0zk:function(e,n,t){"use strict";var r=t("qfsr");t.d(n,"a",(function(){return r.a})),t("dNPo"),t("NSPv");var c=t("qDRf");t.d(n,"b",(function(){return c.a})),t.d(n,"c",(function(){return c.c})),t.d(n,"d",(function(){return c.e})),t("S9X5")},Ql0z:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t("mrSG"),c=t("yGQT"),u=t("YMmn"),o=t("YDRF"),i=Object(c.w)(o.a,Object(c.z)(u.a.setImageSourcesListVisible,(function(e,n){return r.__assign({},e,{imageSourcesListVisible:n.payload})})),Object(c.z)(u.a.setImageSourcesList,(function(e,n){return r.__assign({},e,{imageSourcesList:n.payload||[]})})),Object(c.z)(u.a.createImageSourceSuccess,(function(e,n){return e})),Object(c.z)(u.a.createImageSourceFailure,(function(e,n){return e})),Object(c.z)(u.a.setSelectedImageSourceId,(function(e,n){return r.__assign({},e,{selectedImageSourceId:n.payload})})),Object(c.z)(u.a.addImagesBySourceId,(function(e,n){return r.__assign({},e,{imagesBySourceId:r.__assign({},e,n.payload)})})),Object(c.z)(u.a.setImageSourceViewTab,(function(e,n){return r.__assign({},e,{imageSourceViewTab:n.payload})})),Object(c.z)(u.a.generateImageSourceToken,(function(e,n){var t;return r.__assign({},e,{isGeneratingTokenByImageSource:r.__assign({},e.isGeneratingTokenByImageSource,(t={},t[n.payload]=!0,t))})})),Object(c.z)(u.a.generateImageSourceTokenSuccess,(function(e,n){var t;return r.__assign({},e,{isGeneratingTokenByImageSource:r.__assign({},e.isGeneratingTokenByImageSource,(t={},t[n.payload]=!1,t))})})),Object(c.z)(u.a.generateImageSourceTokenFailure,(function(e,n){var t;return r.__assign({},e,{isGeneratingTokenByImageSource:r.__assign({},e.isGeneratingTokenByImageSource,(t={},t[n.payload]=!1,t))})})),Object(c.z)(u.a.loadImageSourceTokensSuccess,(function(e,n){var t;return r.__assign({},e,{imageSourceTokensByImageSource:r.__assign({},e.imageSourceTokensByImageSource,(t={},t[n.imageSourceId]=n.imageSourceTokens,t))})})));function a(e,n){return i(e,n)}},T2NM:function(e,n,t){"use strict";t.d(n,"a",(function(){return b}));var r=t("mrSG"),c=t("7bNT"),u=t("yGQT"),o=t("F/XL"),i=t("0/uQ"),a=t("/PH2"),l=t("15JJ"),s=t("67Y/"),d=t("9Z1F"),g=t("YMmn"),O=t("nAcS"),S=t("YZbJ"),b=function(){return function(e,n,t,b,p,m){var I=this;this.store$=e,this.actions$=n,this.firestore=t,this.imageSourcesService=b,this.router=p,this.ppService=m,this.getImageSources$=Object(c.h)((function(){return I.actions$.pipe(Object(c.j)(S.a.setUser,g.a.setImageSourcesListVisible),Object(a.a)(I.store$.pipe(Object(u.B)(S.d)),I.store$.pipe(Object(u.B)(O.d))),Object(l.a)((function(e){var n=r.__read(e,3),t=n[1];return n[2]&&t?I.ppService.getImageSources$(t).pipe(Object(s.a)((function(e){return g.a.setImageSourcesList({payload:e})}))):Object(o.a)(g.a.setImageSourcesList({payload:[]}))})))})),this.createImageSource$=Object(c.h)((function(){return I.actions$.pipe(Object(c.j)(g.a.createImageSource),Object(a.a)(I.store$.pipe(Object(u.B)(S.d))),Object(l.a)((function(e){var n=r.__read(e,2)[1];return n?I.firestore.createImageSource(n).pipe(Object(s.a)((function(e){return g.a.createImageSourceSuccess({payload:"imageSource"})})),Object(d.a)((function(e){return Object(o.a)(g.a.createImageSourceFailure({payload:e}))}))):Object(o.a)(g.a.createImageSourceFailure({payload:"no user"}))})))})),this.loadImagesBySourceId$=Object(c.h)((function(){return I.actions$.pipe(Object(c.j)(g.a.loadImagesBySourceId),Object(a.a)(I.store$.pipe(Object(u.B)(S.d))),Object(l.a)((function(e){var n=r.__read(e,2),t=n[0].payload;return t&&n[1]?I.firestore.getFilesForSource$(t).pipe(Object(s.a)((function(e){var n;return g.a.addImagesBySourceId({payload:(n={},n[t]=e,n)})}))):Object(o.a)(g.a.addImagesBySourceId({payload:{}}))})))})),this.uploadImageSourceFile$=Object(c.h)((function(){return I.actions$.pipe(Object(c.j)(g.a.uploadImageSourceFile),Object(a.a)(I.store$.pipe(Object(u.B)(S.d))),Object(l.a)((function(e){var n=r.__read(e,2),t=n[0],c=n[1],u=t.selectedImageSourceId,a=t.file;return u&&c?Object(i.a)(I.imageSourcesService.uploadImageSourceFile(a,c,u)).pipe(Object(s.a)((function(e){return g.a.uploadImageSourceFileSuccess({selectedImageSourceId:u})}))):Object(o.a)(g.a.uploadImageSourceFileFailure({payload:"no user or source"}))})))})),this.deleteUpload$=Object(c.h)((function(){return I.actions$.pipe(Object(c.j)(g.a.deleteUpload),Object(l.a)((function(e){var n=e.payload;return n?Object(i.a)(I.imageSourcesService.deleteFile(n)).pipe(Object(s.a)((function(e){return g.a.deleteUploadSuccess({payload:n})}))):Object(o.a)(g.a.deleteUploadFailure({payload:"no uploadId"}))})))})),this.navigateToImageSourceView$=Object(c.h)((function(){return I.actions$.pipe(Object(c.j)(g.a.navigateToImageSourceView),Object(a.a)(I.store$.pipe(Object(u.B)(O.b))),Object(s.a)((function(e){var n=r.__read(e,2),t=n[1];return I.router.navigate(r.__spread([n[0].payload],t?[t]:[]))})))}),{dispatch:!1}),this.updateImageSource$=Object(c.h)((function(){return I.actions$.pipe(Object(c.j)(g.a.updateImageSource),Object(l.a)((function(e){var n=e.imageSourceId,t=e.patch;return Object(i.a)(I.imageSourcesService.updateImageSource(n,t)).pipe(Object(s.a)((function(e){return g.a.updateImageSourceSuccess({imageSourceId:n,patch:t})})))})))})),this.generateImageSourceToken$=Object(c.h)((function(){return I.actions$.pipe(Object(c.j)(g.a.generateImageSourceToken),Object(l.a)((function(e){var n=e.payload;return Object(i.a)(I.imageSourcesService.generateImageSourceToken(n)).pipe(Object(s.a)((function(){return g.a.generateImageSourceTokenSuccess({payload:n})})),Object(d.a)((function(){return Object(o.a)(g.a.generateImageSourceTokenFailure({payload:n}))})))})))})),this.loadImageSourceTokens$=Object(c.h)((function(){return I.actions$.pipe(Object(c.j)(g.a.loadImageSourceTokens),Object(l.a)((function(e){var n=e.imageSourceId;return Object(i.a)(I.imageSourcesService.loadImageSourceTokens(n)).pipe(Object(s.a)((function(e){return g.a.loadImageSourceTokensSuccess({imageSourceId:n,imageSourceTokens:e})})))})))}))}}()},UnLV:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r=function(){return function(){}}()},YDRF:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r={imageSourcesListVisible:!1,imageSourcesList:[],selectedImageSourceId:void 0,imagesBySourceId:{},imageSourceViewTab:void 0,isGeneratingTokenByImageSource:{},imageSourceTokensByImageSource:{}}},YMmn:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t("yGQT"),c=function(){function e(){}return e.CATEGORY="[IMAGE_SOURCES]",e.setImageSourcesListVisible=Object(r.u)(e.CATEGORY+" SET_IMAGE_SOURCES_LIST_VISIBLE",Object(r.A)()),e.setImageSourcesList=Object(r.u)(e.CATEGORY+" SET_IMAGE_SOURCES_LIST",Object(r.A)()),e.createImageSource=Object(r.u)(e.CATEGORY+" CREATE_IMAGE_SOURCE"),e.createImageSourceSuccess=Object(r.u)(e.CATEGORY+" CREATE_IMAGE_SOURCE_SUCCESS",Object(r.A)()),e.createImageSourceFailure=Object(r.u)(e.CATEGORY+" CREATE_IMAGE_SOURCE_FAILURE",Object(r.A)()),e.setSelectedImageSourceId=Object(r.u)(e.CATEGORY+" SET_SELECTED_IMAGE_SOURCE_ID",Object(r.A)()),e.loadImagesBySourceId=Object(r.u)(e.CATEGORY+" LOAD_IMAGES_BY_SOURCE_ID",Object(r.A)()),e.addImagesBySourceId=Object(r.u)(e.CATEGORY+" ADD_IMAGES_BY_SOURCE_ID",Object(r.A)()),e.uploadImageSourceFile=Object(r.u)(e.CATEGORY+" UPLOAD_IMAGE_SOURCE_FILE",Object(r.A)()),e.uploadImageSourceFileSuccess=Object(r.u)(e.CATEGORY+" UPLOAD_IMAGE_SOURCE_FILE_SUCCESS",Object(r.A)()),e.uploadImageSourceFileFailure=Object(r.u)(e.CATEGORY+" UPLOAD_IMAGE_SOURCE_FILE_FAILURE",Object(r.A)()),e.deleteUpload=Object(r.u)(e.CATEGORY+" DELETE_UPLOAD",Object(r.A)()),e.deleteUploadSuccess=Object(r.u)(e.CATEGORY+" DELETE_UPLOAD_SUCCESS",Object(r.A)()),e.deleteUploadFailure=Object(r.u)(e.CATEGORY+" DELETE_UPLOAD_FAILURE",Object(r.A)()),e.setImageSourceViewTab=Object(r.u)(e.CATEGORY+" SET_IMAGE_SOURCE_VIEW_TAB",Object(r.A)()),e.navigateToImageSourceView=Object(r.u)(e.CATEGORY+" NAVIGATE_TO_IMAGE_SOURCE_VIEW",Object(r.A)()),e.updateImageSource=Object(r.u)(e.CATEGORY+" UPDATE_IMAGE_SOURCE",Object(r.A)()),e.updateImageSourceSuccess=Object(r.u)(e.CATEGORY+" UPDATE_IMAGE_SOURCE_SUCCESS",Object(r.A)()),e.updateImageSourceFailure=Object(r.u)(e.CATEGORY+" UPDATE_IMAGE_SOURCE_FAILURE",Object(r.A)()),e.generateImageSourceToken=Object(r.u)(e.CATEGORY+" GENERATE_IMAGE_SOURCE_TOKEN",Object(r.A)()),e.generateImageSourceTokenSuccess=Object(r.u)(e.CATEGORY+" GENERATE_IMAGE_SOURCE_TOKEN_SUCCESS",Object(r.A)()),e.generateImageSourceTokenFailure=Object(r.u)(e.CATEGORY+" GENERATE_IMAGE_SOURCE_TOKEN_FAILURE",Object(r.A)()),e.loadImageSourceTokens=Object(r.u)(e.CATEGORY+" LOAD_IMAGE_SOURCE_TOKENS",Object(r.A)()),e.loadImageSourceTokensSuccess=Object(r.u)(e.CATEGORY+" LOAD_IMAGE_SOURCE_TOKENS_SUCCESS",Object(r.A)()),e.loadImageSourceTokensFailure=Object(r.u)(e.CATEGORY+" LOAD_IMAGE_SOURCE_TOKENS_FAILURE",Object(r.A)()),e}()},ma4j:function(e,n,t){"use strict";var r=t("CcnG"),c=t("gIcY");t("ISaB"),t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return o}));var u=r.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:inline-block;margin-left:-.625rem;margin-top:-.25rem}.string-container[_ngcontent-%COMP%]{height:auto;padding:.25rem 0 .25rem .5rem;display:flex;align-items:center;border-radius:.25rem;border:.125rem solid transparent;cursor:pointer}.string-container.editing[_ngcontent-%COMP%], .string-container[_ngcontent-%COMP%]:hover{border-radius:.25rem;border:.125rem solid #8a9a5b}.string-container.editing[_ngcontent-%COMP%]{cursor:default}.string-container[_ngcontent-%COMP%]   .string-text-input-container[_ngcontent-%COMP%]{position:relative;height:100%;flex:0 1 auto}.string-container[_ngcontent-%COMP%]   .string-text-input-container[_ngcontent-%COMP%]   .string-text.space-maker[_ngcontent-%COMP%]{visibility:hidden}.string-container[_ngcontent-%COMP%]   .string-text-input-container[_ngcontent-%COMP%]   .string-text-input[_ngcontent-%COMP%]{border:none;outline:0;font-size:100%;padding:0;overflow:hidden;position:absolute;width:100%;height:100%}.string-container[_ngcontent-%COMP%]   .string-text[_ngcontent-%COMP%]{flex:0 1 auto;text-overflow:ellipsis;overflow:hidden}.string-container[_ngcontent-%COMP%]   .string-text.is-placeholder[_ngcontent-%COMP%]{opacity:.5}.string-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center;padding-left:.5rem;padding-right:.25rem}.string-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{height:auto;border:none;padding:.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center}.string-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .control-button.pale[_ngcontent-%COMP%]{opacity:.5}.string-container[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]   .control-icon[_ngcontent-%COMP%]{font-size:calc(100% - 3px)}.hidden[_ngcontent-%COMP%]{display:none}"]],data:{}});function o(e){return r.Nb(0,[r.Jb(402653184,1,{stringInput:0}),r.Jb(402653184,2,{editEl:0}),(e()(),r.sb(2,0,null,null,16,"div",[["class","string-container editing"]],[[2,"hidden",null]],null,null,null,null)),(e()(),r.sb(3,0,null,null,8,"div",[["class","string-text-input-container"]],null,null,null,null,null)),(e()(),r.sb(4,0,[[1,0],["stringInput",1]],null,5,"input",[["autofocus",""],["class","string-text-input"],["spellcheck","false"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(e,n,t){var c=!0,u=e.component;return"input"===n&&(c=!1!==r.Db(e,5)._handleInput(t.target.value)&&c),"blur"===n&&(c=!1!==r.Db(e,5).onTouched()&&c),"compositionstart"===n&&(c=!1!==r.Db(e,5)._compositionStart()&&c),"compositionend"===n&&(c=!1!==r.Db(e,5)._compositionEnd(t.target.value)&&c),"ngModelChange"===n&&(c=!1!==u.onStrChange(t)&&c),c}),null,null)),r.rb(5,16384,null,0,c.d,[r.D,r.k,[2,c.a]],null,null),r.Ib(1024,null,c.i,(function(e){return[e]}),[c.d]),r.rb(7,671744,null,0,c.m,[[8,null],[8,null],[8,null],[6,c.i]],{model:[0,"model"]},{update:"ngModelChange"}),r.Ib(2048,null,c.j,null,[c.m]),r.rb(9,16384,null,0,c.k,[[4,c.j]],null,null),(e()(),r.sb(10,0,null,null,1,"div",[["class","string-text space-maker"]],null,null,null,null,null)),(e()(),r.Lb(11,null,["",""])),(e()(),r.sb(12,0,null,null,6,"div",[["class","control-buttons"]],null,null,null,null,null)),(e()(),r.sb(13,0,null,null,2,"div",[["class","control-button"]],null,[[null,"click"],[null,"mousedown"]],(function(e,n,t){var r=!0,c=e.component;return"click"===n&&(r=!1!==c.onSaveEdit()&&r),"mousedown"===n&&(r=!1!==c.preventBlur(t)&&r),r}),null,null)),(e()(),r.sb(14,0,null,null,1,"span",[["class","material-icons control-icon"]],null,null,null,null,null)),(e()(),r.Lb(-1,null,[" save "])),(e()(),r.sb(16,0,null,null,2,"div",[["class","control-button"]],null,[[null,"click"],[null,"mousedown"]],(function(e,n,t){var r=!0,c=e.component;return"click"===n&&(r=!1!==c.onCancelEdit()&&r),"mousedown"===n&&(r=!1!==c.preventBlur(t)&&r),r}),null,null)),(e()(),r.sb(17,0,null,null,1,"span",[["class","material-icons control-icon"]],null,null,null,null,null)),(e()(),r.Lb(-1,null,[" cancel "])),(e()(),r.sb(19,0,null,null,6,"div",[["class","string-container"]],[[2,"hidden",null]],[[null,"click"]],(function(e,n,t){var r=!0;return"click"===n&&(r=!1!==e.component.onEdit()&&r),r}),null,null)),(e()(),r.sb(20,0,null,null,1,"div",[["class","string-text"]],[[2,"is-placeholder",null]],null,null,null,null)),(e()(),r.Lb(21,null,["",""])),(e()(),r.sb(22,0,null,null,3,"div",[["class","control-buttons"]],null,null,null,null,null)),(e()(),r.sb(23,0,null,null,2,"div",[["class","control-button pale"]],null,null,null,null,null)),(e()(),r.sb(24,0,null,null,1,"span",[["class","material-icons control-icon"]],null,null,null,null,null)),(e()(),r.Lb(-1,null,[" create "]))],(function(e,n){e(n,7,0,n.component.editStr)}),(function(e,n){var t=n.component;e(n,2,0,!t.isEditing),e(n,4,0,t.placeholder,r.Db(n,9).ngClassUntouched,r.Db(n,9).ngClassTouched,r.Db(n,9).ngClassPristine,r.Db(n,9).ngClassDirty,r.Db(n,9).ngClassValid,r.Db(n,9).ngClassInvalid,r.Db(n,9).ngClassPending),e(n,11,0,t.editStr||t.placeholder),e(n,19,0,t.isEditing),e(n,20,0,!t.str),e(n,21,0,t.str||t.placeholder)}))}},nAcS:function(e,n,t){"use strict";t.d(n,"d",(function(){return o})),t.d(n,"c",(function(){return i})),t.d(n,"h",(function(){return l})),t.d(n,"g",(function(){return s})),t.d(n,"e",(function(){return d})),t.d(n,"b",(function(){return g})),t.d(n,"f",(function(){return S})),t.d(n,"a",(function(){return b}));var r=t("yGQT"),c=t("LvDl"),u=Object(r.v)("imageSources"),o=Object(r.y)(u,(function(e){return e.imageSourcesListVisible})),i=Object(r.y)(u,(function(e){return e.imageSourcesList})),a=Object(r.y)(i,(function(e){return Object(c.keyBy)(e,"id")})),l=Object(r.y)(u,(function(e){return e.selectedImageSourceId})),s=Object(r.y)(a,l,(function(e,n){return e[n]})),d=Object(r.y)(u,(function(e){return e.imagesBySourceId})),g=Object(r.y)(u,(function(e){return e.imageSourceViewTab})),O=Object(r.y)(u,(function(e){return e.isGeneratingTokenByImageSource})),S=Object(r.y)(l,O,(function(e,n){return n[e]})),b=Object(r.y)(u,(function(e){return e.imageSourceTokensByImageSource}))},ssbT:function(e,n,t){"use strict";var r=t("YMmn");t.d(n,"a",(function(){return r.a})),t("T2NM"),t("Ql0z");var c=t("nAcS");t.d(n,"b",(function(){return c.a})),t.d(n,"c",(function(){return c.c})),t.d(n,"d",(function(){return c.e})),t.d(n,"e",(function(){return c.f})),t.d(n,"f",(function(){return c.g})),t.d(n,"g",(function(){return c.h})),t("YDRF")}}]);
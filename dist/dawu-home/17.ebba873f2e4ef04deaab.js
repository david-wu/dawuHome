(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"0pbZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={imageSourcesListVisible:!1,imageSourcesList:[],selectedImageSourceId:void 0,imagesBySourceId:{},imageSourceViewTab:void 0,isGeneratingTokenByImageSource:{},imageSourceTokensByImageSource:{}}},"8lX2":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return g})),n.d(t,"f",(function(){return O})),n.d(t,"a",(function(){return p}));var o=n("yGQT"),r=n("LvDl"),c=Object(o.v)("imageSources"),a=Object(o.y)(c,(function(e){return e.imageSourcesListVisible})),i=Object(o.y)(c,(function(e){return e.imageSourcesList})),u=Object(o.y)(i,(function(e){return Object(r.keyBy)(e,"id")})),s=Object(o.y)(c,(function(e){return e.selectedImageSourceId})),l=Object(o.y)(u,s,(function(e,t){return e[t]})),d=Object(o.y)(c,(function(e){return e.imagesBySourceId})),g=Object(o.y)(c,(function(e){return e.imageSourceViewTab})),b=Object(o.y)(c,(function(e){return e.isGeneratingTokenByImageSource})),O=Object(o.y)(s,b,(function(e,t){return t[e]})),p=Object(o.y)(c,(function(e){return e.imageSourceTokensByImageSource}))},SEYJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n("mrSG"),r=n("yGQT"),c=n("e/Xe"),a=n("0pbZ"),i=Object(r.w)(a.a,Object(r.z)(c.a.setImageSourcesListVisible,(function(e,t){return o.__assign({},e,{imageSourcesListVisible:t.payload})})),Object(r.z)(c.a.setImageSourcesList,(function(e,t){return o.__assign({},e,{imageSourcesList:t.payload||[]})})),Object(r.z)(c.a.createImageSourceSuccess,(function(e,t){return e})),Object(r.z)(c.a.createImageSourceFailure,(function(e,t){return e})),Object(r.z)(c.a.setSelectedImageSourceId,(function(e,t){return o.__assign({},e,{selectedImageSourceId:t.payload})})),Object(r.z)(c.a.addImagesBySourceId,(function(e,t){return o.__assign({},e,{imagesBySourceId:o.__assign({},e,t.payload)})})),Object(r.z)(c.a.setImageSourceViewTab,(function(e,t){return o.__assign({},e,{imageSourceViewTab:t.payload})})),Object(r.z)(c.a.generateImageSourceToken,(function(e,t){var n;return o.__assign({},e,{isGeneratingTokenByImageSource:o.__assign({},e.isGeneratingTokenByImageSource,(n={},n[t.payload]=!0,n))})})),Object(r.z)(c.a.generateImageSourceTokenSuccess,(function(e,t){var n;return o.__assign({},e,{isGeneratingTokenByImageSource:o.__assign({},e.isGeneratingTokenByImageSource,(n={},n[t.payload]=!1,n))})})),Object(r.z)(c.a.generateImageSourceTokenFailure,(function(e,t){var n;return o.__assign({},e,{isGeneratingTokenByImageSource:o.__assign({},e.isGeneratingTokenByImageSource,(n={},n[t.payload]=!1,n))})})),Object(r.z)(c.a.loadImageSourceTokensSuccess,(function(e,t){var n;return o.__assign({},e,{imageSourceTokensByImageSource:o.__assign({},e.imageSourceTokensByImageSource,(n={},n[t.imageSourceId]=t.imageSourceTokens,n))})})));function u(e,t){return i(e,t)}},"e/Xe":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("yGQT"),r=function(){function e(){}return e.CATEGORY="[IMAGE_SOURCES]",e.setImageSourcesListVisible=Object(o.u)(e.CATEGORY+" SET_IMAGE_SOURCES_LIST_VISIBLE",Object(o.A)()),e.setImageSourcesList=Object(o.u)(e.CATEGORY+" SET_IMAGE_SOURCES_LIST",Object(o.A)()),e.createImageSource=Object(o.u)(e.CATEGORY+" CREATE_IMAGE_SOURCE"),e.createImageSourceSuccess=Object(o.u)(e.CATEGORY+" CREATE_IMAGE_SOURCE_SUCCESS",Object(o.A)()),e.createImageSourceFailure=Object(o.u)(e.CATEGORY+" CREATE_IMAGE_SOURCE_FAILURE",Object(o.A)()),e.setSelectedImageSourceId=Object(o.u)(e.CATEGORY+" SET_SELECTED_IMAGE_SOURCE_ID",Object(o.A)()),e.loadImagesBySourceId=Object(o.u)(e.CATEGORY+" LOAD_IMAGES_BY_SOURCE_ID",Object(o.A)()),e.addImagesBySourceId=Object(o.u)(e.CATEGORY+" ADD_IMAGES_BY_SOURCE_ID",Object(o.A)()),e.uploadImageSourceFile=Object(o.u)(e.CATEGORY+" UPLOAD_IMAGE_SOURCE_FILE",Object(o.A)()),e.uploadImageSourceFileSuccess=Object(o.u)(e.CATEGORY+" UPLOAD_IMAGE_SOURCE_FILE_SUCCESS",Object(o.A)()),e.uploadImageSourceFileFailure=Object(o.u)(e.CATEGORY+" UPLOAD_IMAGE_SOURCE_FILE_FAILURE",Object(o.A)()),e.deleteUpload=Object(o.u)(e.CATEGORY+" DELETE_UPLOAD",Object(o.A)()),e.deleteUploadSuccess=Object(o.u)(e.CATEGORY+" DELETE_UPLOAD_SUCCESS",Object(o.A)()),e.deleteUploadFailure=Object(o.u)(e.CATEGORY+" DELETE_UPLOAD_FAILURE",Object(o.A)()),e.setImageSourceViewTab=Object(o.u)(e.CATEGORY+" SET_IMAGE_SOURCE_VIEW_TAB",Object(o.A)()),e.navigateToImageSourceView=Object(o.u)(e.CATEGORY+" NAVIGATE_TO_IMAGE_SOURCE_VIEW",Object(o.A)()),e.updateImageSource=Object(o.u)(e.CATEGORY+" UPDATE_IMAGE_SOURCE",Object(o.A)()),e.updateImageSourceSuccess=Object(o.u)(e.CATEGORY+" UPDATE_IMAGE_SOURCE_SUCCESS",Object(o.A)()),e.updateImageSourceFailure=Object(o.u)(e.CATEGORY+" UPDATE_IMAGE_SOURCE_FAILURE",Object(o.A)()),e.generateImageSourceToken=Object(o.u)(e.CATEGORY+" GENERATE_IMAGE_SOURCE_TOKEN",Object(o.A)()),e.generateImageSourceTokenSuccess=Object(o.u)(e.CATEGORY+" GENERATE_IMAGE_SOURCE_TOKEN_SUCCESS",Object(o.A)()),e.generateImageSourceTokenFailure=Object(o.u)(e.CATEGORY+" GENERATE_IMAGE_SOURCE_TOKEN_FAILURE",Object(o.A)()),e.loadImageSourceTokens=Object(o.u)(e.CATEGORY+" LOAD_IMAGE_SOURCE_TOKENS",Object(o.A)()),e.loadImageSourceTokensSuccess=Object(o.u)(e.CATEGORY+" LOAD_IMAGE_SOURCE_TOKENS_SUCCESS",Object(o.A)()),e.loadImageSourceTokensFailure=Object(o.u)(e.CATEGORY+" LOAD_IMAGE_SOURCE_TOKENS_FAILURE",Object(o.A)()),e}()},hCex:function(e,t,n){"use strict";n.r(t);var o=n("CcnG"),r=function(){return function(){}}(),c=n("Vxrp"),a=n("pMnS"),i=n("6+7j"),u=n("sjqh"),s=n("nPNc"),l=n("s/lM"),d=n("+J3Q"),g=n("LvDl"),b=n("5tJd"),O=function(){function e(){this.filterStr="",this.selectedImageSourceIdChange=new o.n,this.fileGroup=b.b.createWithRoot("ROOT"),this.rootFileId="ROOT"}return e.prototype.ngOnChanges=function(e){e.imageSources&&this.onImageSourcesChanges(this.imageSources),e.selectedImageSourceId&&(this.selectedImageSourceIds=this.selectedImageSourceId?new Set([this.selectedImageSourceId]):new Set)},e.prototype.onImageSourcesChanges=function(e){var t=Object(g.map)(e,(function(e){return Object.assign(new b.a,{id:e.id,label:e.label||e.id})}));this.fileGroup.setRootChildren(t)},e.prototype.onSelectedFileIdsChange=function(e){var t=Array.from(e||[])[0];this.selectedImageSourceIdChange.emit(t)},e}(),p=o.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   dwu-file-explorer[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}"]],data:{}});function f(e){return o.Nb(0,[(e()(),o.sb(0,0,null,null,2,"dwu-file-explorer",[],null,[[null,"filesByIdChange"],[null,"closedFileIdsChange"],[null,"selectedFileIdsChange"]],(function(e,t,n){var o=!0,r=e.component;return"filesByIdChange"===t&&(o=!1!==(r.fileGroup.filesById=n)&&o),"closedFileIdsChange"===t&&(o=!1!==r.fileGroup.setClosedFileIds(n)&&o),"selectedFileIdsChange"===t&&(o=!1!==r.onSelectedFileIdsChange(n)&&o),o}),s.b,s.a)),o.Ib(512,null,l.c,l.c,[[2,l.d]]),o.rb(2,4898816,null,0,d.a,[l.c,o.k],{rootFileId:[0,"rootFileId"],fuzzFilterString:[1,"fuzzFilterString"],filesById:[2,"filesById"],closedFileIds:[3,"closedFileIds"],selectedFileIds:[4,"selectedFileIds"],perfMode:[5,"perfMode"]},{filesByIdChange:"filesByIdChange",closedFileIdsChange:"closedFileIdsChange",selectedFileIdsChange:"selectedFileIdsChange"})],(function(e,t){var n=t.component;e(t,2,0,n.fileGroup.rootFileId,n.filterStr,n.fileGroup.filesById,n.fileGroup.closedFileIds,n.selectedImageSourceIds,!0)}),null)}var S=n("Ip0R"),h=n("ZYCi"),I=n("yGQT"),_=n("tmbU"),m=n("YZbJ"),C=function(){function e(e,t,n){this.store=e,this.router=t,this.activatedRoute=n,this.filterStr="",this.leftSideExpanded=!1,this.user$=this.store.pipe(Object(I.B)(m.d)),this.imageSourcesList$=this.store.pipe(Object(I.B)(_.c)),this.selectedImageSourceId$=this.store.pipe(Object(I.B)(_.g))}return e.prototype.ngOnInit=function(){var e=this;this.store.dispatch(_.a.setImageSourcesListVisible({payload:!0})),this.sub=this.activatedRoute.params.subscribe((function(t){e.store.dispatch(_.a.setSelectedImageSourceId({payload:t.imageSourceId}))}))},e.prototype.ngOnDestroy=function(){this.store.dispatch(_.a.setImageSourcesListVisible({payload:!1})),this.sub&&this.sub.unsubscribe()},e.prototype.onCreateSource=function(){this.store.dispatch(_.a.createImageSource())},e.prototype.onSelectedImageSourceIdChange=function(e){var t=this.router.createUrlTree(["..",e],{relativeTo:this.activatedRoute});this.store.dispatch(_.a.navigateToImageSourceView({payload:t.toString()}))},e}(),j=o.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:100%;width:100%}@media screen and (max-width:750px){[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{box-shadow:2px 2px 4px 0 #9d9b99;flex:0 0 auto;height:13.25rem;width:100%;max-width:none;transition:height 50ms}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side.expanded[_ngcontent-%COMP%]{height:75%}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{background-color:#3f4038;color:#fcfcf9;position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:3.5rem;height:1rem;border:1px solid #8a9a5b;border-radius:5px 5px 0 0;text-align:center;display:flex;justify-content:center;cursor:pointer}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4b5320;color:#fcfcf9}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon.flipped[_ngcontent-%COMP%]{transform:rotate(180deg)}}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]{flex-direction:column}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{box-shadow:2px 2px 4px 0 #9d9b99;flex:0 0 auto;height:13.25rem;width:100%;max-width:none;transition:height 50ms}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side.expanded[_ngcontent-%COMP%]{height:75%}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{background-color:#3f4038;color:#fcfcf9;position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:3.5rem;height:1rem;border:1px solid #8a9a5b;border-radius:5px 5px 0 0;text-align:center;display:flex;justify-content:center;cursor:pointer}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#4b5320;color:#fcfcf9}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon[_ngcontent-%COMP%]{font-size:16px}.narrow-mode[_nghost-%COMP%]   div.page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]   .expander-icon.flipped[_ngcontent-%COMP%]{transform:rotate(180deg)}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{position:relative;flex:1 1 0;overflow:hidden;max-width:27.5%;min-width:20rem}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]   .expander[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .page-container[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:1 1 0;overflow:auto;position:relative}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]{background-color:#ddd9cf;display:flex;flex-direction:column}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{flex:0 0 auto;background-color:#eae6da;min-width:2rem;padding:.25rem .5rem;font-size:1rem;cursor:pointer;text-align:center;outline:0;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#bac39f}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-button.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .control-button[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]   .file-explorer[_ngcontent-%COMP%]{flex:1 1 0}"]],data:{}});function E(e){return o.Nb(0,[(e()(),o.sb(0,0,null,null,12,"div",[["class","page-container"]],null,null,null,null,null)),(e()(),o.sb(1,0,null,null,8,"div",[["class","left-side"]],[[2,"expanded",null]],null,null,null,null)),(e()(),o.sb(2,0,null,null,1,"div",[["class","control-button"]],null,[[null,"click"]],(function(e,t,n){var o=!0;return"click"===t&&(o=!1!==e.component.onCreateSource()&&o),o}),null,null)),(e()(),o.Lb(-1,null,[" + New Source "])),(e()(),o.sb(4,0,null,null,1,"dwu-search-input",[],null,[[null,"searchTextChange"]],(function(e,t,n){var o=!0;return"searchTextChange"===t&&(o=!1!==(e.component.filterStr=n)&&o),o}),i.b,i.a)),o.rb(5,49152,null,0,u.a,[],{searchText:[0,"searchText"],placeholder:[1,"placeholder"]},{searchTextChange:"searchTextChange"}),(e()(),o.sb(6,0,null,null,3,"dwu-image-sources-explorer",[["class","file-explorer"]],null,[[null,"selectedImageSourceIdChange"]],(function(e,t,n){var o=!0;return"selectedImageSourceIdChange"===t&&(o=!1!==e.component.onSelectedImageSourceIdChange(n)&&o),o}),f,p)),o.rb(7,573440,null,0,O,[],{imageSources:[0,"imageSources"],filterStr:[1,"filterStr"],selectedImageSourceId:[2,"selectedImageSourceId"]},{selectedImageSourceIdChange:"selectedImageSourceIdChange"}),o.Fb(131072,S.b,[o.h]),o.Fb(131072,S.b,[o.h]),(e()(),o.sb(10,0,null,null,2,"div",[["class","right-side"]],null,null,null,null,null)),(e()(),o.sb(11,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),o.rb(12,212992,null,0,h.q,[h.b,o.O,o.j,[8,null],o.h],null,null)],(function(e,t){var n=t.component;e(t,5,0,n.filterStr,"search.."),e(t,7,0,o.Mb(t,7,0,o.Db(t,8).transform(n.imageSourcesList$)),n.filterStr,o.Mb(t,7,2,o.Db(t,9).transform(n.selectedImageSourceId$))),e(t,12,0)}),(function(e,t){e(t,1,0,t.component.leftSideExpanded)}))}function M(e){return o.Nb(0,[(e()(),o.Lb(-1,null,[" login\n"]))],null,null)}function T(e){return o.Nb(0,[(e()(),o.hb(16777216,null,null,2,null,E)),o.rb(1,16384,null,0,S.m,[o.O,o.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),o.Fb(131072,S.b,[o.h]),(e()(),o.hb(0,[["loginTemplate",2]],null,0,null,M))],(function(e,t){var n=t.component;e(t,1,0,o.Mb(t,1,0,o.Db(t,2).transform(n.user$)),o.Db(t,3))}),null)}function P(e){return o.Nb(0,[(e()(),o.sb(0,0,null,null,1,"dwu-image-sources",[],null,null,null,T,j)),o.rb(1,245760,null,0,C,[I.n,h.l,h.a],null,null)],(function(e,t){e(t,1,0)}),null)}var y=o.ob("dwu-image-sources",C,P,{},{},[]),A=n("PTyj"),v=n("gIcY"),B=n("0gVX"),G=n("trGy"),x=n("xpxz"),F=n("mrSG"),R=n("6blF"),w=n("67Y/"),U=(n("o0su"),function(){function e(e,t,n,o){this.firestore=e,this.storage=t,this.imageProcessing=n,this.exifService=o}return e.prototype.generateImageSourceToken=function(e){return F.__awaiter(this,void 0,void 0,(function(){return F.__generator(this,(function(t){switch(t.label){case 0:return[4,window.firebase.functions().httpsCallable("generateImageSourceTokenTask")({imageSourceId:e})];case 1:return[2,t.sent()]}}))}))},e.prototype.deleteFile=function(e){return F.__awaiter(this,void 0,void 0,(function(){return F.__generator(this,(function(t){switch(t.label){case 0:return[4,this.storage.deleteFile(e)];case 1:return t.sent(),[4,this.firestore.unregisterFile(e)];case 2:return[2,t.sent()]}}))}))},e.prototype.uploadImageSourceFile=function(e,t,n){return F.__awaiter(this,void 0,void 0,(function(){var o,r,c,a,i,u,s;return F.__generator(this,(function(l){switch(l.label){case 0:return[4,this.exifService.getExifData(e)];case 1:return o=l.sent(),r=this.exifService.getLocationData(o),c={userId:t.uid,fileName:e.name,isUploaded:!1,sourceId:n,locationData:F.__assign({},r)},[4,this.firestore.insertUploadDoc(c)];case 2:return a=l.sent(),i=F.__assign({},c,{id:a.id}),[4,this.imageProcessing.processImageFile(e,o)];case 3:return u=l.sent(),[4,this.storage.uploadFile(u,i.id)];case 4:return[4,l.sent().ref.getDownloadURL()];case 5:return s=l.sent(),[4,this.firestore.registerFileUploaded(i.id,{downloadUrl:s})];case 6:return[2,l.sent()]}}))}))},e.prototype.updateImageSource=function(e,t){return this.firestore.db.collection("imageSources").doc(e).update(t)},e.prototype.loadImageSourceTokens=function(e){var t=this;return R.a.create((function(n){return t.firestore.db.collection("imageSources").doc(e).collection("accessTokens").orderBy("createdAt","desc").onSnapshot(n)})).pipe(Object(w.a)((function(e){return e.docs.map((function(e){return F.__assign({},e.data(),{id:e.id})}))})))},e}()),k=n("GrFz"),L=n("cxyc"),D=n("YDhq"),Y=n("lD1j"),$=n("7bNT"),N=n("ntSj"),V=n("O0RR"),z=n("FE7n"),q=n("Rkte"),X=n("mRcA"),J=n("R7F0"),Q=n("a6Df"),Z=n("Fzqc"),K=n("dWZg"),W=n("qAlS"),H=n("FdjG"),ee=function(){return function(){}}(),te=function(){return n.e(21).then(n.bind(null,"EuRh")).then((function(e){return e.ImageSourceIntroModuleNgFactory}))},ne=function(){return n.e(24).then(n.bind(null,"ac9q")).then((function(e){return e.ImageSourceViewModuleNgFactory}))},oe=function(){return function(){}}(),re=n("3A+F"),ce=n("jG/M"),ae=n("SEYJ"),ie=n("W61y");n.d(t,"ImageSourcesModuleNgFactory",(function(){return ue}));var ue=o.pb(r,[],(function(e){return o.Ab([o.Bb(512,o.j,o.ab,[[8,[c.a,a.a,y,A.b]],[3,o.j],o.w]),o.Bb(4608,S.o,S.n,[o.t,[2,S.A]]),o.Bb(4608,v.r,v.r,[]),o.Bb(135680,B.a,B.a,[o.j,o.g,o.q]),o.Bb(4608,G.a,G.a,[]),o.Bb(4608,x.a,x.a,[]),o.Bb(4608,U,U,[x.a,k.a,L.a,D.a]),o.Bb(4608,Y.a,Y.a,[I.n,$.a,x.a,U,h.l]),o.Bb(1073742336,S.c,S.c,[]),o.Bb(1073742336,v.q,v.q,[]),o.Bb(1073742336,v.h,v.h,[]),o.Bb(1073742336,N.a,N.a,[]),o.Bb(1073742336,V.a,V.a,[]),o.Bb(1073742336,z.a,z.a,[]),o.Bb(1073742336,q.a,q.a,[]),o.Bb(1073742336,X.a,X.a,[]),o.Bb(1073742336,J.a,J.a,[]),o.Bb(1073742336,Q.a,Q.a,[]),o.Bb(1073742336,l.b,l.b,[]),o.Bb(1073742336,Z.a,Z.a,[]),o.Bb(1073742336,K.b,K.b,[]),o.Bb(1073742336,W.h,W.h,[]),o.Bb(1073742336,H.a,H.a,[]),o.Bb(1073742336,ee,ee,[]),o.Bb(1073742336,h.p,h.p,[[2,h.u],[2,h.l]]),o.Bb(1073742336,oe,oe,[]),o.Bb(1073742336,re.a,re.a,[]),o.Bb(1073742336,ce.a,ce.a,[]),o.Bb(1024,I.O,(function(){return[{}]}),[]),o.Bb(1024,I.j,(function(){return[{key:"imageSources",reducerFactory:I.s,metaReducers:[],initialState:void 0}]}),[]),o.Bb(1024,I.P,I.W,[o.q,I.O,I.j]),o.Bb(1024,I.N,(function(){return[ae.a]}),[]),o.Bb(1024,I.Q,(function(e){return[e]}),[I.N]),o.Bb(1024,I.b,(function(e,t,n){return[I.X(e,t,n)]}),[o.q,I.N,I.Q]),o.Bb(1024,I.U,(function(e){return[I.H(e)]}),[I.T]),o.Bb(1073873408,I.o,I.o,[I.P,I.b,I.g,I.p,[2,I.U]]),o.Bb(1024,$.p,(function(){return[[Y.a]]}),[]),o.Bb(1024,$.g,(function(){return[[]]}),[]),o.Bb(1024,$.q,(function(e,t,n){return[$.k(e,t,n)]}),[o.q,$.p,$.g]),o.Bb(1073742336,$.d,$.d,[$.e,$.q,[2,I.p],[2,I.o]]),o.Bb(1073742336,r,r,[]),o.Bb(1024,h.j,(function(){return[[{path:"intro",component:C,children:[{path:"",loadChildren:te}]},{path:":imageSourceId",component:C,children:[{path:"",loadChildren:ne}]},{path:"",pathMatch:"full",redirectTo:"intro"}],[{path:"auth",component:ie.a},{path:"auth-success",component:ie.a}]]}),[])])}))},lD1j:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o=n("mrSG"),r=n("7bNT"),c=n("yGQT"),a=n("F/XL"),i=n("0/uQ"),u=n("/PH2"),s=n("15JJ"),l=n("67Y/"),d=n("9Z1F"),g=n("YZbJ"),b=n("8lX2"),O=n("e/Xe"),p=function(){return function(e,t,n,p,f){var S=this;this.store$=e,this.actions$=t,this.firestore=n,this.imageSourcesService=p,this.router=f,this.getImageSources$=Object(r.h)((function(){return S.actions$.pipe(Object(r.j)(g.a.setUser,O.a.setImageSourcesListVisible),Object(u.a)(S.store$.pipe(Object(c.B)(g.d)),S.store$.pipe(Object(c.B)(b.d))),Object(s.a)((function(e){var t=o.__read(e,3),n=t[1];return t[2]&&n?S.firestore.getImageSources$(n).pipe(Object(l.a)((function(e){return O.a.setImageSourcesList({payload:e})}))):Object(a.a)(O.a.setImageSourcesList({payload:[]}))})))})),this.createImageSource$=Object(r.h)((function(){return S.actions$.pipe(Object(r.j)(O.a.createImageSource),Object(u.a)(S.store$.pipe(Object(c.B)(g.d))),Object(s.a)((function(e){var t=o.__read(e,2)[1];return t?S.firestore.createImageSource(t).pipe(Object(l.a)((function(e){return O.a.createImageSourceSuccess({payload:"imageSource"})})),Object(d.a)((function(e){return Object(a.a)(O.a.createImageSourceFailure({payload:e}))}))):Object(a.a)(O.a.createImageSourceFailure({payload:"no user"}))})))})),this.loadImagesBySourceId$=Object(r.h)((function(){return S.actions$.pipe(Object(r.j)(O.a.loadImagesBySourceId),Object(u.a)(S.store$.pipe(Object(c.B)(g.d))),Object(s.a)((function(e){var t=o.__read(e,2),n=t[0].payload;return n&&t[1]?S.firestore.getFilesForSource$(n).pipe(Object(l.a)((function(e){var t;return O.a.addImagesBySourceId({payload:(t={},t[n]=e,t)})}))):Object(a.a)(O.a.addImagesBySourceId({payload:{}}))})))})),this.uploadImageSourceFile$=Object(r.h)((function(){return S.actions$.pipe(Object(r.j)(O.a.uploadImageSourceFile),Object(u.a)(S.store$.pipe(Object(c.B)(g.d))),Object(s.a)((function(e){var t=o.__read(e,2),n=t[0],r=t[1],c=n.selectedImageSourceId,u=n.file;return c&&r?Object(i.a)(S.imageSourcesService.uploadImageSourceFile(u,r,c)).pipe(Object(l.a)((function(e){return O.a.uploadImageSourceFileSuccess({selectedImageSourceId:c})}))):Object(a.a)(O.a.uploadImageSourceFileFailure({payload:"no user or source"}))})))})),this.deleteUpload$=Object(r.h)((function(){return S.actions$.pipe(Object(r.j)(O.a.deleteUpload),Object(s.a)((function(e){var t=e.payload;return t?Object(i.a)(S.imageSourcesService.deleteFile(t)).pipe(Object(l.a)((function(e){return O.a.deleteUploadSuccess({payload:t})}))):Object(a.a)(O.a.deleteUploadFailure({payload:"no uploadId"}))})))})),this.navigateToImageSourceView$=Object(r.h)((function(){return S.actions$.pipe(Object(r.j)(O.a.navigateToImageSourceView),Object(u.a)(S.store$.pipe(Object(c.B)(b.b))),Object(l.a)((function(e){var t=o.__read(e,2),n=t[1];return S.router.navigate(o.__spread([t[0].payload],n?[n]:[]))})))}),{dispatch:!1}),this.updateImageSource$=Object(r.h)((function(){return S.actions$.pipe(Object(r.j)(O.a.updateImageSource),Object(s.a)((function(e){var t=e.imageSourceId,n=e.patch;return Object(i.a)(S.imageSourcesService.updateImageSource(t,n)).pipe(Object(l.a)((function(e){return O.a.updateImageSourceSuccess({imageSourceId:t,patch:n})})))})))})),this.generateImageSourceToken$=Object(r.h)((function(){return S.actions$.pipe(Object(r.j)(O.a.generateImageSourceToken),Object(s.a)((function(e){var t=e.payload;return Object(i.a)(S.imageSourcesService.generateImageSourceToken(t)).pipe(Object(l.a)((function(){return O.a.generateImageSourceTokenSuccess({payload:t})})),Object(d.a)((function(){return Object(a.a)(O.a.generateImageSourceTokenFailure({payload:t}))})))})))})),this.loadImageSourceTokens$=Object(r.h)((function(){return S.actions$.pipe(Object(r.j)(O.a.loadImageSourceTokens),Object(s.a)((function(e){var t=e.imageSourceId;return Object(i.a)(S.imageSourcesService.loadImageSourceTokens(t)).pipe(Object(l.a)((function(e){return O.a.loadImageSourceTokensSuccess({imageSourceId:t,imageSourceTokens:e})})))})))}))}}()},tmbU:function(e,t,n){"use strict";var o=n("e/Xe");n.d(t,"a",(function(){return o.a})),n("lD1j"),n("SEYJ");var r=n("8lX2");n.d(t,"b",(function(){return r.a})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.e})),n.d(t,"e",(function(){return r.f})),n.d(t,"f",(function(){return r.g})),n.d(t,"g",(function(){return r.h})),n("0pbZ")}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{xmiH:function(n,e,l){"use strict";l.r(e);var t=l("CcnG"),o=function(){return function(){}}(),r=l("Vxrp"),u=l("pMnS"),i=l("j53P"),c=l("SAP+"),s=l("Ip0R"),a=l("6+7j"),g=l("sjqh"),d=l("nPNc"),p=l("s/lM"),b=l("+J3Q"),h=l("mrSG"),f=l("LvDl"),m=l("26FU"),O=l("dzgT"),C=l("67Y/"),I=l("yGQT"),M=l("5tJd"),P=l("tmbU"),_=function(){function n(n){this.store=n,this.selectToken=new t.n,this.fileGroup=M.b.createWithRoot("ROOT"),this.selectedFileIds=new Set,this.rootFileId="ROOT",this.imageSourceId$=new m.a(void 0),this.imageTokens$=Object(O.a)(this.store.pipe(Object(I.B)(P.b)),this.imageSourceId$).pipe(Object(C.a)((function(n){var e=h.__read(n,2);return e[0][e[1]]||[]})))}return n.prototype.ngOnInit=function(){var n=this;this.subs=[this.imageTokens$.subscribe((function(e){n.imageTokensById=Object(f.keyBy)(e,"id");var l=(e||[]).map((function(e){return Object.assign(new M.a,{id:e.id,label:n.getTokenLabel(e)})}));n.fileGroup.setRootChildren(l)}))]},n.prototype.ngOnDestroy=function(){(this.subs||[]).forEach((function(n){return n.unsubscribe()}))},n.prototype.ngOnChanges=function(n){n.imageSourceId&&(this.store.dispatch(P.a.loadImageSourceTokens({imageSourceId:this.imageSourceId})),this.imageSourceId$.next(this.imageSourceId))},n.prototype.getTokenLabel=function(n){return n.label||n.value.slice(0,6)},n.prototype.onSelectedFileIds=function(n){this.selectedFileIds=n;var e=Array.from(n||[])[0];this.selectToken.emit(this.imageTokensById[e])},n}(),k=t.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   dwu-file-explorer[_ngcontent-%COMP%]{width:100%;height:100%}"]],data:{}});function x(n){return t.Nb(0,[(n()(),t.sb(0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),t.sb(1,0,null,null,2,"dwu-file-explorer",[],null,[[null,"filesByIdChange"],[null,"selectedFileIdsChange"]],(function(n,e,l){var t=!0,o=n.component;return"filesByIdChange"===e&&(t=!1!==(o.fileGroup.filesById=l)&&t),"selectedFileIdsChange"===e&&(t=!1!==o.onSelectedFileIds(l)&&t),t}),d.b,d.a)),t.Ib(512,null,p.c,p.c,[[2,p.d]]),t.rb(3,4898816,null,0,b.a,[p.c,t.k],{rootFileId:[0,"rootFileId"],fuzzFilterString:[1,"fuzzFilterString"],filesById:[2,"filesById"],selectedFileIds:[3,"selectedFileIds"],perfMode:[4,"perfMode"]},{filesByIdChange:"filesByIdChange",selectedFileIdsChange:"selectedFileIdsChange"})],(function(n,e){var l=e.component;n(e,3,0,l.fileGroup.rootFileId,l.filterStr,l.fileGroup.filesById,l.selectedFileIds,!0)}),null)}function S(n){return t.Nb(0,[(n()(),t.hb(16777216,null,null,2,null,x)),t.rb(1,16384,null,0,s.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),t.Fb(131072,s.b,[t.h])],(function(n,e){var l=e.component;n(e,1,0,t.Mb(e,1,0,t.Db(e,2).transform(l.imageTokens$)))}),null)}var T=function(){function n(n){this.store=n,this.selectedImageSourceId$=this.store.pipe(Object(I.B)(P.g)),this.isGeneratingToken$=this.store.pipe(Object(I.B)(P.e))}return n.prototype.generateImageSourceToken=function(n){this.store.dispatch(P.a.generateImageSourceToken({payload:n}))},n.prototype.getUsage=function(n){return"const Piper = require('picture-piper').Piper;\nconst secret = require('./secret.json');\n\nconst piper = new Piper(secret);\npiper.send(imageBlob);\n"},n.prototype.getSecretJson=function(n){return'{\n  "sourceId": "'+n+'",\n  "token": "'+(this.selectedToken&&this.selectedToken.value)+'",\n}\n'},n.prototype.onSelectToken=function(n){console.log("token",n),this.selectedToken=n},n}(),B=t.qb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;flex-direction:column;padding:1rem 1.25rem;height:100%;width:100%}[_nghost-%COMP%]   .demo-container[_ngcontent-%COMP%]{flex:1 1 0;padding-bottom:5rem}[_nghost-%COMP%]   .demo-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:1rem}[_nghost-%COMP%]   .demo-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem}[_nghost-%COMP%]   .demo-container[_ngcontent-%COMP%]   dwu-code-snippet[_ngcontent-%COMP%]{margin:.5rem 1rem;max-width:40rem}[_nghost-%COMP%]   .demo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem 0 0}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]{margin-top:1rem;flex:1 1 0;width:100%;min-height:15rem;display:flex}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]{background-color:#ddd9cf;display:flex;flex-direction:column;width:10rem}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]{flex:0 0 auto;background-color:#eae6da;min-width:2rem;padding:.25rem .5rem;font-size:1rem;cursor:pointer;text-align:center;outline:0;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-button[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#bac39f}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-button.active[_ngcontent-%COMP%]:not([disabled]){background-color:#708238;color:#fcfcf9}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .control-button[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.3}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .file-explorer-container[_ngcontent-%COMP%]   .file-explorer[_ngcontent-%COMP%]{flex:1 1 0}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:1 1 0;border:1px solid #ddd9cf;overflow:scroll;display:flex;flex-direction:column}[_nghost-%COMP%]   .helper-container[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   dwu-code-snippet[_ngcontent-%COMP%]{margin:.5rem}"]],data:{}});function w(n){return t.Nb(0,[(n()(),t.sb(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),t.sb(1,0,null,null,1,"dwu-code-snippet",[],null,null,null,i.b,i.a)),t.rb(2,4767744,null,0,c.a,[t.k],{snippet:[0,"snippet"]},null),(n()(),t.sb(3,0,null,null,1,"dwu-code-snippet",[],null,null,null,i.b,i.a)),t.rb(4,4767744,null,0,c.a,[t.k],{snippet:[0,"snippet"]},null)],(function(n,e){var l=e.component;n(e,2,0,l.getUsage(e.parent.context.ngIf)),n(e,4,0,l.getSecretJson(e.parent.context.ngIf))}),null)}function v(n){return t.Nb(0,[(n()(),t.Lb(-1,null,[" Select a token for setup instructions "]))],null,null)}function y(n){return t.Nb(0,[(n()(),t.sb(0,0,null,null,12,null,null,null,null,null,null,null)),(n()(),t.sb(1,0,null,null,7,"div",[["class","file-explorer-container"]],null,null,null,null,null)),(n()(),t.sb(2,0,null,null,2,"div",[["class","control-button"]],[[1,"disabled",0]],[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.generateImageSourceToken(n.context.ngIf)&&t),t}),null,null)),t.Fb(131072,s.b,[t.h]),(n()(),t.Lb(-1,null,["+ New Token"])),(n()(),t.sb(5,0,null,null,1,"dwu-search-input",[],null,[[null,"searchTextChange"]],(function(n,e,l){var t=!0;return"searchTextChange"===e&&(t=!1!==(n.component.filterStr=l)&&t),t}),a.b,a.a)),t.rb(6,49152,null,0,g.a,[],{searchText:[0,"searchText"],placeholder:[1,"placeholder"]},{searchTextChange:"searchTextChange"}),(n()(),t.sb(7,0,null,null,1,"dwu-image-source-tokens-list",[["class","file-explorer"]],null,[[null,"selectToken"]],(function(n,e,l){var t=!0;return"selectToken"===e&&(t=!1!==n.component.onSelectToken(l)&&t),t}),S,k)),t.rb(8,770048,null,0,_,[I.n],{imageSourceId:[0,"imageSourceId"],filterStr:[1,"filterStr"]},{selectToken:"selectToken"}),(n()(),t.sb(9,0,null,null,3,"div",[["class","right-side"]],null,null,null,null,null)),(n()(),t.hb(16777216,null,null,1,null,w)),t.rb(11,16384,null,0,s.m,[t.O,t.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t.hb(0,[["noSelectedTokenTemplate",2]],null,0,null,v))],(function(n,e){var l=e.component;n(e,6,0,l.filterStr,"search.."),n(e,8,0,e.context.ngIf,l.filterStr),n(e,11,0,l.selectedToken,t.Db(e,12))}),(function(n,e){var l=e.component;n(e,2,0,!!t.Mb(e,2,0,t.Db(e,3).transform(l.isGeneratingToken$))||null)}))}function F(n){return t.Nb(0,[(n()(),t.sb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),t.Lb(-1,null,["Setup Agents"])),(n()(),t.sb(2,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t.Lb(-1,null,[" Image source tokens grant write access to the image source, make sure not to share these tokens in public repositories. The Picture Piper Agent uses a token to push events to this image source.\n"])),(n()(),t.sb(4,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t.Lb(-1,null,[" I recommend a separate token for each device contributing to this source. This allows for distinguishing images between devices, and revoking access for a single device.\n"])),(n()(),t.sb(6,0,null,null,3,"div",[["class","helper-container"]],null,null,null,null,null)),(n()(),t.hb(16777216,null,null,2,null,y)),t.rb(8,16384,null,0,s.m,[t.O,t.L],{ngIf:[0,"ngIf"]},null),t.Fb(131072,s.b,[t.h])],(function(n,e){var l=e.component;n(e,8,0,t.Mb(e,8,0,t.Db(e,9).transform(l.selectedImageSourceId$)))}),null)}function j(n){return t.Nb(0,[(n()(),t.sb(0,0,null,null,1,"dwu-image-source-setup",[],null,null,null,F,B)),t.rb(1,49152,null,0,T,[I.n],null,null)],null,null)}var G=t.ob("dwu-image-source-setup",T,j,{},{},[]),L=l("gIcY"),q=l("0gVX"),N=l("kxb1"),R=l("O0RR"),$=l("FE7n"),z=l("Rkte"),A=l("mRcA"),D=l("R7F0"),J=l("a6Df"),E=l("Fzqc"),U=l("dWZg"),Y=l("qAlS"),Q=l("FdjG"),V=l("ntSj"),W=l("ZYCi"),Z=function(){return function(){}}();l.d(e,"ImageSourceSetupModuleNgFactory",(function(){return H}));var H=t.pb(o,[],(function(n){return t.Ab([t.Bb(512,t.j,t.ab,[[8,[r.a,u.a,G]],[3,t.j],t.w]),t.Bb(4608,s.o,s.n,[t.t,[2,s.A]]),t.Bb(4608,L.r,L.r,[]),t.Bb(135680,q.a,q.a,[t.j,t.g,t.q]),t.Bb(1073742336,s.c,s.c,[]),t.Bb(1073742336,N.a,N.a,[]),t.Bb(1073742336,L.q,L.q,[]),t.Bb(1073742336,L.h,L.h,[]),t.Bb(1073742336,R.a,R.a,[]),t.Bb(1073742336,$.a,$.a,[]),t.Bb(1073742336,z.a,z.a,[]),t.Bb(1073742336,A.a,A.a,[]),t.Bb(1073742336,D.a,D.a,[]),t.Bb(1073742336,J.a,J.a,[]),t.Bb(1073742336,p.b,p.b,[]),t.Bb(1073742336,E.a,E.a,[]),t.Bb(1073742336,U.b,U.b,[]),t.Bb(1073742336,Y.h,Y.h,[]),t.Bb(1073742336,Q.a,Q.a,[]),t.Bb(1073742336,V.a,V.a,[]),t.Bb(1073742336,W.p,W.p,[[2,W.u],[2,W.l]]),t.Bb(1073742336,Z,Z,[]),t.Bb(1073742336,o,o,[]),t.Bb(1024,W.j,(function(){return[[{path:"",component:T}]]}),[])])}))}}]);